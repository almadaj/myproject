import java.io.DataOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.*;
public class Inicio {
	static Pilha p;

	Inicio(int num) {

		p = new Pilha(null, null);
		for (int i = 0; i < p.length; i++) {
			p = new Pilha(null, null);
		}
		System.out.printf("Estamos trabalhando com %d pilhas\n", num);
	}
	public static void main(String[] args) throws IOException {
		Random r = new Random();
		Pilha pilha = new Pilha(null, null);
		Calendar cal = GregorianCalendar.getInstance();
		cal.setTime( new Date() );

		int dia = cal.getActualMaximum( Calendar.DAY_OF_MONTH );
		int mes = (cal.get(Calendar.MONDAY)+1);


		int chDia = dia;
		int chMes = mes;


		String texto = null;
		String palavra = ("Os 9 piores filmes de terror"); 

		//		File file = new File("C:/Users/Juliano/Desktop/Encripto.txt");
		//		FileOutputStream fos;
		//		try {
		//			fos = new FileOutputStream(file);
		//			DataOutputStream dos = new DataOutputStream(fos);
		//			dos.writeBytes(palavra);
		//			dos.close();
		//			fos.close();
		//		} catch (FileNotFoundException e) {
		//			System.out.println("Arquivo não encontrado");
		//			e.printStackTrace();
		//
		//		}

		int nume = 0;
		char letra;
		String msgDesc = "";
		
		// Pensei em jogar o esquema de adicionar as pilhas aqui,
		// Cada caractere entraria criptografado
		// Ae dps na hora de dar o pop eu chamaria o for debaixo
		System.out.println("Mensagem Encriptada: ");
		
		for(int i = 0; i < palavra.length()- 2; i += 2 ){
			nume = (int) palavra.charAt(i);
			letra = (char)(nume + chDia);
			msgDesc += letra;

			nume = (int) palavra.charAt(i+1);
			letra = (char)(nume + chMes);
			msgDesc += letra;


		}
		System.out.println(msgDesc);
		String msgCrip = "";
		System.out.println("Mensagem Desencriptada: ");
		for(int i = 0; i < msgDesc.length()- 2; i += 2 ){
			nume = (int) msgDesc.charAt(i);
			letra = (char)(nume - chDia);
			msgCrip += letra;

			nume = (int) msgDesc.charAt(i+1);
			letra = (char)(nume - chMes);
			msgCrip += letra;


		}
		System.out.println(msgCrip);
	

		int num = palavra.length();

		num = r.nextInt((palavra.length()) + 1);

		palavra = cript(palavra, num);

		System.out.println(palavra);
	}

	//Problema ta aqui, nesse metodo
	// string não ta recendo o valor da aux.pop(0);
	//No console só ta sendo printado ("")
	//falta o algoritmo pra inverter a palavra
	//ta indo uma palavra inteira na pilha, eu sei, só deixa

	public static String cript(String mensagem, int num) {
		String string = "";
		if (num == 0 || num == 1)
			num = 2;

		// metodo de criação de pilhas
		new Inicio(num);

		// algoritmo para adicionar nas pilhas
		int j = 0;
		for (int i = 0; i < mensagem.length(); i++) {
			p.push(mensagem.charAt(i));

			if (j == p.length) {
				j = 0;
			}
			j++;
		}

		System.out.println("Desencriptação:");

		Pilha aux = p;

		aux.pop(0);


		return string;

		//4 encaralhada da manha e eu comentando o codigo
	}
}
